!function(t){function e(e){for(var r,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(u&&u(e);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={0:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;a.push([213,1]),n()}({11:function(t,e,n){},162:function(t,e,n){},187:function(t,e,n){"use strict";var r=n(11);n.n(r).a},193:function(t,e,n){var r={"./af":17,"./af.js":17,"./ar":18,"./ar-dz":19,"./ar-dz.js":19,"./ar-kw":20,"./ar-kw.js":20,"./ar-ly":21,"./ar-ly.js":21,"./ar-ma":22,"./ar-ma.js":22,"./ar-sa":23,"./ar-sa.js":23,"./ar-tn":24,"./ar-tn.js":24,"./ar.js":18,"./az":25,"./az.js":25,"./be":26,"./be.js":26,"./bg":27,"./bg.js":27,"./bm":28,"./bm.js":28,"./bn":29,"./bn-bd":30,"./bn-bd.js":30,"./bn.js":29,"./bo":31,"./bo.js":31,"./br":32,"./br.js":32,"./bs":33,"./bs.js":33,"./ca":34,"./ca.js":34,"./cs":35,"./cs.js":35,"./cv":36,"./cv.js":36,"./cy":37,"./cy.js":37,"./da":38,"./da.js":38,"./de":39,"./de-at":40,"./de-at.js":40,"./de-ch":41,"./de-ch.js":41,"./de.js":39,"./dv":42,"./dv.js":42,"./el":43,"./el.js":43,"./en-au":44,"./en-au.js":44,"./en-ca":45,"./en-ca.js":45,"./en-gb":46,"./en-gb.js":46,"./en-ie":47,"./en-ie.js":47,"./en-il":48,"./en-il.js":48,"./en-in":49,"./en-in.js":49,"./en-nz":50,"./en-nz.js":50,"./en-sg":51,"./en-sg.js":51,"./eo":52,"./eo.js":52,"./es":53,"./es-do":54,"./es-do.js":54,"./es-mx":55,"./es-mx.js":55,"./es-us":56,"./es-us.js":56,"./es.js":53,"./et":57,"./et.js":57,"./eu":58,"./eu.js":58,"./fa":59,"./fa.js":59,"./fi":60,"./fi.js":60,"./fil":61,"./fil.js":61,"./fo":62,"./fo.js":62,"./fr":63,"./fr-ca":64,"./fr-ca.js":64,"./fr-ch":65,"./fr-ch.js":65,"./fr.js":63,"./fy":66,"./fy.js":66,"./ga":67,"./ga.js":67,"./gd":68,"./gd.js":68,"./gl":69,"./gl.js":69,"./gom-deva":70,"./gom-deva.js":70,"./gom-latn":71,"./gom-latn.js":71,"./gu":72,"./gu.js":72,"./he":73,"./he.js":73,"./hi":74,"./hi.js":74,"./hr":75,"./hr.js":75,"./hu":76,"./hu.js":76,"./hy-am":77,"./hy-am.js":77,"./id":78,"./id.js":78,"./is":79,"./is.js":79,"./it":80,"./it-ch":81,"./it-ch.js":81,"./it.js":80,"./ja":82,"./ja.js":82,"./jv":83,"./jv.js":83,"./ka":84,"./ka.js":84,"./kk":85,"./kk.js":85,"./km":86,"./km.js":86,"./kn":87,"./kn.js":87,"./ko":88,"./ko.js":88,"./ku":89,"./ku.js":89,"./ky":90,"./ky.js":90,"./lb":91,"./lb.js":91,"./lo":92,"./lo.js":92,"./lt":93,"./lt.js":93,"./lv":94,"./lv.js":94,"./me":95,"./me.js":95,"./mi":96,"./mi.js":96,"./mk":97,"./mk.js":97,"./ml":98,"./ml.js":98,"./mn":99,"./mn.js":99,"./mr":100,"./mr.js":100,"./ms":101,"./ms-my":102,"./ms-my.js":102,"./ms.js":101,"./mt":103,"./mt.js":103,"./my":104,"./my.js":104,"./nb":105,"./nb.js":105,"./ne":106,"./ne.js":106,"./nl":107,"./nl-be":108,"./nl-be.js":108,"./nl.js":107,"./nn":109,"./nn.js":109,"./oc-lnc":110,"./oc-lnc.js":110,"./pa-in":111,"./pa-in.js":111,"./pl":112,"./pl.js":112,"./pt":113,"./pt-br":114,"./pt-br.js":114,"./pt.js":113,"./ro":115,"./ro.js":115,"./ru":116,"./ru.js":116,"./sd":117,"./sd.js":117,"./se":118,"./se.js":118,"./si":119,"./si.js":119,"./sk":120,"./sk.js":120,"./sl":121,"./sl.js":121,"./sq":122,"./sq.js":122,"./sr":123,"./sr-cyrl":124,"./sr-cyrl.js":124,"./sr.js":123,"./ss":125,"./ss.js":125,"./sv":126,"./sv.js":126,"./sw":127,"./sw.js":127,"./ta":128,"./ta.js":128,"./te":129,"./te.js":129,"./tet":130,"./tet.js":130,"./tg":131,"./tg.js":131,"./th":132,"./th.js":132,"./tk":133,"./tk.js":133,"./tl-ph":134,"./tl-ph.js":134,"./tlh":135,"./tlh.js":135,"./tr":136,"./tr.js":136,"./tzl":137,"./tzl.js":137,"./tzm":138,"./tzm-latn":139,"./tzm-latn.js":139,"./tzm.js":138,"./ug-cn":140,"./ug-cn.js":140,"./uk":141,"./uk.js":141,"./ur":142,"./ur.js":142,"./uz":143,"./uz-latn":144,"./uz-latn.js":144,"./uz.js":143,"./vi":145,"./vi.js":145,"./x-pseudo":146,"./x-pseudo.js":146,"./yo":147,"./yo.js":147,"./zh-cn":148,"./zh-cn.js":148,"./zh-hk":149,"./zh-hk.js":149,"./zh-mo":150,"./zh-mo.js":150,"./zh-tw":151,"./zh-tw.js":151};function s(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id=193},213:function(t,e,n){"use strict";n.r(e);n(162);var r=n(8),s=n(161),a=n.n(s),o=n(2),i=n.n(o),c=n(7),l=n.n(c),u=n(4),d=n(13),p=n(6),f=n.n(p),m=n(9),j={email:{required:m.required,max:Object(m.maxLength)(100),email:m.email},password:{required:m.required,max:Object(m.maxLength)(100),min:Object(m.minLength)(2)}};function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"SignIn",data:function(){return{email:"tester123@m.tast",password:"ndlkptb",showErrors:!1}},methods:v(v({},Object(u.b)(["signIn"])),{},{submit:function(){var t=this;if(this.$v.$invalid)this.showErrors=!0;else{this.email,this.password;this.signIn(new FormData(signIn)).catch((function(e){t.$emit("authError",e)}))}}}),validations:{email:j.email,password:j.password},mounted:function(){this.$emit("mounted")}},g=n(3),O={name:"AuthFrame",components:{SignIn:Object(g.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-in"},[n("form",{attrs:{id:"signIn"}},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"d-block"},[t._v("E-mail"),n("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"email",name:"username"},domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.showErrors?n("div",{staticClass:"text-danger"},[t.$v.email.email?t._e():n("small",{staticClass:"d-block"},[t._v("Email некорректный")]),t.$v.email.required?t._e():n("small",{staticClass:"d-block"},[t._v("Введите Email")]),t.$v.email.max?t._e():n("small",{staticClass:"d-block"},[t._v("Email некорректный")])]):t._e()]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"d-block"},[t._v("Пароль"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.$v.password.$model,expression:"$v.password.$model"}],staticClass:"form-control",attrs:{type:"password",name:"password"},domProps:{value:t.$v.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.password,"$model",e.target.value)}}})]),t.showErrors?n("div",{staticClass:"text-danger"},[t.$v.password.max?t._e():n("small",{staticClass:"d-block"},[t._v("Пароль слишком длинный")]),t.$v.password.required?t._e():n("small",{staticClass:"d-block"},[t._v("Введите пароль")]),t.$v.password.min?t._e():n("small",{staticClass:"d-block"},[t._v("Пароль слишком короткий")])]):t._e()]),t._t("autherror"),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submit}},[t._v("Войти")])])],2)])}),[],!1,null,null,null).exports},data:function(){return{authError:!1}},computed:{}},w={name:"AuthPage",components:{AuthFrame:Object(g.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth-frame p-3 shadow rounded-sm"},[t._m(0),n("div",{staticClass:"auth-frame__content bg-white border p-3"},[n("sign-in",{on:{authError:function(e){t.authError=e}},scopedSlots:t._u([{key:"autherror",fn:function(){return[t.authError?n("div",{staticClass:"text-danger py-2"},[t._v(t._s(t.authError))]):t._e()]},proxy:!0}])})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"auth-frame__tabs pb-3"},[e("div",{staticClass:"text-center"},[this._v("Авторизация")])])}],!1,null,null,null).exports}},y=Object(g.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"auth-page bg-light"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col col-md-8 col-lg-6 mx-auto"},[e("auth-frame")],1)])])])}),[],!1,null,null,null).exports,_={methods:{logout:function(){this.$store.dispatch("logout")}}},k=(n(187),Object(g.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"header"},[n("div",{staticClass:"container"},[n("div",{staticClass:"nav d-flex align-content-center text-white"},[n("router-link",{staticClass:"nav-link text-white p-3",attrs:{to:"/profile"}},[t._v("Пользователь")]),n("router-link",{staticClass:"nav-link text-white p-3",attrs:{to:"/objects"}},[t._v("Объекты учета")]),n("div",{staticClass:"flex-grow-1"}),n("a",{staticClass:"nav-link text-white p-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Выйти")])],1)])])}),[],!1,null,"ff6380e6",null).exports);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var I={components:{AppHeader:k},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.d)(["user"]))},P=Object(g.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"personal-area"},[n("app-header"),n("div",{staticClass:"container pt-4"},[n("h2",{staticClass:"mb-4"},[t._v("Информация о пользователе")]),t.user?n("table",[n("tr",[n("th",[t._v("ФИО:")]),n("td",{staticClass:"pl-4"},[t._v(t._s(t.user.fullName||""))])]),n("tr",[n("th",[t._v("Логин:")]),n("td",{staticClass:"pl-4"},[t._v(t._s(t.user.login||""))])])]):t._e()])],1)}),[],!1,null,null,null).exports,E={props:["objects","activeObjectId"]},C=Object(g.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-md-6"},[n("h2",{staticClass:"mb-4"},[t._v("Объекты учета")]),n("div",{staticClass:"nav nav-tabs flex-column border-bottom-0"},t._l(t.objects,(function(e){return n("div",{key:e.id,staticClass:"nav-link text-center d-block mb-2 border-secondary rounded-sm crp",class:{"bg-primary text-white":t.activeObjectId==e.id},on:{click:function(n){return t.$emit("select",e.id)}}},[t._v(t._s(e.pointName))])})),0)])}),[],!1,null,null,null).exports,D=n(160),$=n.n(D),S=n(0),L=n.n(S);function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N={props:["object"],data:function(){return{newIndications:"",newIndicationsError:!1,sort:"asc"}},computed:A(A({},Object(u.c)(["indicationsLength"])),{},{maxIndications:function(){return Math.max.apply(Math,$()(this.sortedIndications.map((function(t){return t.value}))))},sortedIndications:function(){switch(this.sort){case"asc":return this.object.indications.sort((function(t,e){return L()(t.period)-L()(e.period)}));case"desc":return this.object.indications.sort((function(t,e){var n=L()(t.period);return L()(e.period)-n}))}}}),methods:A(A({},Object(u.b)(["sendNewIndication","deleteIndication"])),{},{getFormattedDate:function(t){return L()(t).format("DD.MM.YYYY - HH:mm:ss")},checkIndications:function(){this.newIndications<this.maxIndications?this.newIndicationsError="Показания не могут быть меньше предыдущих":this.newIndicationsError=!1},sendIndications:function(){var t=this;return l()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkIndications(),t.newIndicationsError){e.next=5;break}return new Date,e.next=5,t.sendNewIndication({ownerId:t.object.id,period:L()().format(),value:Number(t.newIndications)});case 5:case"end":return e.stop()}}),e)})))()},removeIndication:function(t){var e=this;return l()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.deleteIndication(t);case 2:case"end":return n.stop()}}),n)})))()}}),watch:{newIndications:function(t,e){isNaN(t)&&(this.newIndications=e)},object:{deep:!0,handler:function(){this.newIndications=this.maxIndications}}},mounted:function(){this.newIndications=this.maxIndications}};function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={components:{AppHeader:k,ObjectList:C,Indications:Object(g.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-md-6"},[n("h2",[t._v(t._s(t.object.pointName))]),n("div",{staticClass:"mb-2"},[t._v("Переданные показания: ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],staticClass:"mb-3",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.sort=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"asc"}},[t._v("По возрастанию")]),n("option",{attrs:{value:"desc"}},[t._v("По убыванию")])]),n("table",{staticClass:"mb-4"},t._l(t.sortedIndications,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"border border-grey py-1 px-3"},[t._v(t._s(t.getFormattedDate(e.period)))]),n("th",{staticClass:"border border-grey text-right py-1 px-3"},[t._v(t._s(e.value))]),n("td",[n("button",{staticClass:"btn btn-danger",on:{click:function(n){return t.removeIndication(e)}}},[n("small",[t._v("Удалить")])])])])})),0),n("div",{staticClass:"mb-2"},[t._v("Отправить показания")]),n("form",{staticClass:"form-inline"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newIndications,expression:"newIndications",modifiers:{trim:!0}}],staticClass:"form-control mr-2",attrs:{type:"text"},domProps:{value:t.newIndications},on:{input:function(e){e.target.composing||(t.newIndications=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.sendIndications(e)}}},[t._v("Отправить")]),t.newIndicationsError?n("small",{staticClass:"d-block mt-2 text-danger w-100"},[t._v(t._s(t.newIndicationsError))]):t._e()])])}),[],!1,null,null,null).exports},data:function(){return{activeObjectId:!1}},methods:{selectObject:function(t){this.activeObjectId=t},getObjects:function(){return this.objects}},computed:U(U({},Object(u.d)(["objects"])),{},{activeObject:function(){var t=this;return!1!==this.activeObjectId&&this.objects.find((function(e){return e.id==t.activeObjectId}))}})},q=Object(g.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"personal-area"},[n("app-header"),n("div",{staticClass:"container pt-4"},[n("div",{staticClass:"row"},[n("object-list",{attrs:{objects:t.objects,activeObjectId:t.activeObjectId},on:{select:function(e){return t.selectObject(e)}}}),!1!==t.activeObjectId?n("Indications",{attrs:{object:t.activeObject}}):t._e()],1)])],1)}),[],!1,null,null,null).exports;r.a.use(d.a);var M=[{path:"/auth",component:y},{path:"/",redirect:P},{path:"/profile",component:P},{path:"/objects",component:q}],R=new d.a({mode:"history",routes:M}),B=n(14),G=n.n(B);function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var J="http://aspt.tgc2-energo.ru",Y=G.a.create({baseURL:J}),K=G.a.create({baseURL:J});K.interceptors.request.use((function(t){return t.headers=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},t.headers),t}),(function(t){return Promise.reject(error)})),r.a.use(u.a);var Q=new u.a.Store({state:{appLoaded:!1,loading:!1,user:null,objects:[]},actions:{signIn:function(t,e){return l()(i.a.mark((function n(){var r,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.dispatch,t.commit,n.prev=1,r("startLoading"),n.next=5,Y.post("/token",e);case 5:s=n.sent,localStorage.setItem("access_token",s.data.access_token),n.next=15;break;case 9:throw n.prev=9,n.t0=n.catch(1),console.error("Authorization failed"),console.error(n.t0),r("stopLoading"),"Неверный логин/пароль";case 15:r("getUser");case 16:case"end":return n.stop()}}),n,null,[[1,9]])})))()},getUser:function(t){return l()(i.a.mark((function e(){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.prev=1,e.next=4,K.get("/User");case 4:s=e.sent,r("SET_USER",s.data),"/profile"!=window.location.pathname&&R.push("/profile"),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to get user"),console.error(e.t0),n("stopLoading"),n("logout"),state.appLoaded||r("APP_LOADED");case 16:n("getObjects");case 17:case"end":return e.stop()}}),e,null,[[1,9]])})))()},getObjects:function(t){return l()(i.a.mark((function e(){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.prev=1,e.next=4,K.get("/Points");case 4:s=e.sent,r("SET_OBJECTS",s.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("failed to get user data"),console.error(e.t0);case 12:n("getIndications");case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getIndications:function(t){return l()(i.a.mark((function e(){var n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,r=t.dispatch,s=t.commit,n.objects.forEach(function(){var t=l()(i.a.mark((function t(e){var a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.get("/Indication/".concat(e.id));case 3:a=t.sent,o=a.data,s("SET_INDICATIONS",{object:e,indications:o}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to get object indication id:".concat(e.id)),console.error(t.t0);case 12:return t.prev=12,r("stopLoading"),n.appLoaded||s("APP_LOADED"),t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[0,8,12,16]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},sendNewIndication:function(t,e){return l()(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.dispatch,t.commit,r("startLoading"),n.prev=2,n.next=5,K.post("/Indication",e);case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("Failed to send object indication id:".concat(e.ownerId)),console.error(n.t0);case 11:return n.prev=11,r("stopLoading"),n.finish(11);case 14:r("getIndications");case 15:case"end":return n.stop()}}),n,null,[[2,7,11,14]])})))()},deleteIndication:function(t,e){return l()(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.dispatch,t.commit,r("startLoading"),n.prev=2,n.next=5,K.delete("/Indication/".concat(e.id));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),console.error("Failed to delete object indication id:".concat(e.id)),console.error(n.t0);case 11:return n.prev=11,r("stopLoading"),n.finish(11);case 14:r("getIndications");case 15:case"end":return n.stop()}}),n,null,[[2,7,11,14]])})))()},autologin:function(t){return l()(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dispatch,r=t.commit,localStorage.getItem("access_token")){e.next=5;break}return R.replace("/auth"),r("APP_LOADED"),e.abrupt("return");case 5:n("getUser");case 6:case"end":return e.stop()}}),e)})))()},logout:function(t){var e=t.commit;localStorage.removeItem("access_token"),e("SET_USER",null),R.push("/auth"),e("APP_LOADED")},startLoading:function(t){(0,t.commit)("SET_LOADING",!0)},stopLoading:function(t){(0,t.commit)("SET_LOADING",!1)}},mutations:{SET_LOADING:function(t,e){t.loading=e},APP_LOADED:function(t){t.appLoaded=!0},SET_USER:function(t,e){t.user=e},SET_OBJECTS:function(t,e){t.objects.splice(0,t.objects.length),e.forEach((function(e){e.indications=[],t.objects.push(e)}))},SET_INDICATIONS:function(t,e){e.object.indications.splice(0,e.object.indications.length),e.indications.forEach((function(t){e.object.indications.push(t)}))}}});function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var W={computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(u.d)(["loading","appLoaded"]))},X={components:{Loader:Object(g.a)(W,(function(){var t=this.$createElement,e=this._self._c||t;return this.loading||!this.appLoaded?e("div",{staticClass:"loader",class:{global:!this.appLoaded}},[e("div",{staticClass:"spinner-border text-primary"})]):this._e()}),[],!1,null,null,null).exports}},Z=Object(g.a)(X,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view"),e("loader")],1)}),[],!1,null,null,null).exports;r.a.use(a.a),r.a.directive("focus",{inserted:function(t){t.focus()}}),Q.dispatch("autologin");var tt=document.getElementById("app");new r.a({name:"TGK",el:tt,store:Q,router:R,render:function(t){return t(Z)}})}});